<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicast</title>
    {% load static %}
    <link rel="shortcut icon" href="{% static 'app/img/Fondos/fondo-clinica.png' %}" />
    <link rel="stylesheet" href="{% static 'app/css/styles.css' %}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <!--Link de Google icons-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>
<body>
    <!-- Nav -->
    {% block nav %}
    {% include 'app/header.html' %}
    {% endblock %}
    <!-- Contenido Formulario -->
    <div class="container contenedor-form">
      <div class="row">
        <div class="col"></div>
        <div class="col-xs-10 col-sm-10 col-md-8 col-lg-6">
          <form id="formulario" method="post">
            {% csrf_token %}
            <legend class="titulo-reg text-center mb-2">Formulario de Registro</legend>
            <div class="row g-3 mb-3">
              <div class="col">
                <div id="formFloating3" class="form-floating">
                    <input type="text" name="nombres"
                      id="{{ form.nombres.id_for_label }}"
                      class="form-control"
                      placeholder="name"
                      pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ]+\s[A-Za-zÁÉÍÓÚáéíóúÑñ]+"
                      title="Ingrese ambos nombres"
                      required>
                    <label for="{{ form.nombres.id_for_label}}">Nombres:</label>
                    {% if form.nombres.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.nombres.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                    {% endif %}
                </div>       
              </div>

              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="text" name="apellidos"
                    id="{{ form.apellidos.id_for_label }}"
                    class="form-control"
                    placeholder="name"
                    pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ]+\s[A-Za-zÁÉÍÓÚáéíóúÑñ]+"
                    title="Ingrese ambos apellidos"
                    required>
                  <label for="{{ form.apellidos.id_for_label }}">Apellidos:</label>
                  {% if form.apellidos.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.apellidos.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>

            </div>

            <div class="row g-3 mb-3">
              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="email" name="correo"
                    id="correo"
                    class="form-control"
                    placeholder="name@example.cl"
                    pattern="[a-zA-Z0-9._%+-]+@(gmail.com|hotmail.com)" 
                    title="El email debe tener formato name@example.com"
                    required>
                  <label >Correo Electrónico:</label>
                  {% if form.correo.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.correo.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>

              <div class="col">
                <div id="formFloating3" class="form-floating ">
                  <input type="text" name="nombre_usuario"
                    id="{{ form.nombre_usuario.id_for_label }}"
                    class="form-control"
                    placeholder="username"
                    pattern="^[a-zA-Z0-9_-]{3,11}$"
                    title="El nombre tiene que tener un mínimo 3 y maximo 11 caracteres"
                    required>
                  <label for="{{ form.nombre_usuario.id_for_label }}">Nombre de Usuario:</label>
                  {% if form.nombre_usuario.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.nombre_usuario.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="password" name="contraseña"
                    id="{{ form.contraseña.id_for_label }}"
                    class="form-control"
                    placeholder="Password"
                    pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9].*[0-9])(?=.*[^a-zA-Z0-9]).{8,}$"
                    title="Debe contener al menos 1 letra mayúscula, 1 letra minúscula, 2 dígitos y 
                      1 caracter especial. Además, el mínimo de caracteres permitidos es de 8."
                    required>
                  <label for="{{ form.contraseña.id_for_label }}">Contraseña:</label>
                  {% if form.contraseña.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.contraseña.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>

              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="password" name="repetir_contraseña"
                    id="{{ form.repetir_contraseña.id_for_label }}"
                    class="form-control"
                    placeholder="name@example.cl"
                    autocomplete="new-password"
                    required>
                  <label for="{{ form.repetir_contraseña.id_for_label }}">Repita Contraseña:</label>
                  {% if form.repetir_contraseña.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.repetir_contraseña.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="row g-3 mb-3">

              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="text" name="direccion"
                    id="direccion"
                    class="form-control"
                    placeholder="Direccion"
                    pattern="[a-zA-ZáéíóúÁÉÍÓÚñÑ\s.-]{1,50}\s[0-9]{1,5}" 
                    title="Ingresa una dirección válida"
                    required>
                  <label >Dirección:</label>
                  {% if form.direccion.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.direccion.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
                <div id="errorDireccion" class="invalid-feedback"></div>
                <div class="error"></div>
              </div>  
              <div class="col">
                <div id="formFloating3" class="form-floating">
                  <input type="date" name="fecha_nacimiento"
                    id="fecha"
                    class="form-control"
                    placeholder="dd-mm-yyyy"
                    min="1970-01-01"
                    max=""
                    value="{{ form.fecha_nacimiento.value|date:'Y-m-d' }}"
                    required>
                  <label for="{{ form.fecha_nacimiento.id_for_label }}">Fecha de Nacimiento:</label>
                  {% if form.fecha_nacimiento.errors %}
                    <div class="invalid-feedback">
                      {% for error in form.fecha_nacimiento.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
            <!-- Botón Confirmar-->
            <div class="contenedor-boton">
              <input id="submit" type="submit" class="btn btn-primary mb-3 link" value="Confirmar">
            </div>
            <!-- Mensaje Exito y Error -->
            {% if messages %}
              <div class="messages">
                {% for message in messages %}
                  {% if message.tags == 'success' %}
                    <div class="success alert alert-success text-center">{{ message }}</div>
                  {% else %}
                    <div class="error alert alert-danger text-center">{{ message }}</div>
                  {% endif %}
                {% endfor %}
              </div>
            {% endif %}
          </form>
        </div>
        <div class="col"></div>
      </div>
    </div>

    <!-- <script src="{% static 'app/js/validRegistro.js' %}"></script> -->
    <!-- Asignar fecha actual a inputs tipo date -->
    <script>
      var fechaActual = new Date().toISOString().substr(0, 10);
      document.getElementById("fecha").max = fechaActual;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>